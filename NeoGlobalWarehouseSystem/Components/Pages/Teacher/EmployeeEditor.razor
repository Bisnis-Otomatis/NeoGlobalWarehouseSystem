<MudPaper Class="pa-5 ma-1" Elevation="3">
    <MudStack Spacing="3">
        <MudTextField @bind-Value="Name" Label="Employee Name" Required="true" />
        <MudButton Color="Color.Primary"
                   Variant="Variant.Filled"
                   OnClick="ReturnEmployee">
            @ButtonName
        </MudButton>
    </MudStack>
</MudPaper>

@code {
    public string Name { get; set; } = string.Empty;

    [Parameter]
    public Data.ApplicationDb.Employee? Employee { get; set; }

    [Parameter]
    public string ButtonName { get; set; } = string.Empty;

    [Parameter]
    public EventCallback<Data.ApplicationDb.Employee> ProcessedEmployee { get; set; }

    protected override void OnInitialized()
    {
        if (Employee == null)
            Employee = new();
        else
            Name = Employee.Name;
    }

    public async Task ReturnEmployee()
    {
        if (Employee is null)
            return;

        Employee.Name = Name.Trim();
        await ProcessedEmployee.InvokeAsync(Employee);

        ResetFields();
    }

    void ResetFields()
    {
        Employee = new();
        Name = string.Empty;
    }
}
